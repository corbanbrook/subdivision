/* Config */

// Gutter - Can be fixed or relative unit
$subdivision-gutter: 10px !default;
$subdivision-h-gutter: $subdivision-gutter !default;
$subdivision-v-gutter: $subdivision-gutter !default;

// Selectors
$subdivision-container-selector: ".container" !default;
$subdivision-column-selector: "div" !default;


/* Mixins */
@mixin column($fraction: 1, $offset: 0) {
  flex-basis: calc(#{percentage($fraction)} - #{$subdivision-h-gutter});
  max-width: calc(#{percentage($fraction)} - #{$subdivision-h-gutter});
  
  @include offset($offset);
}

@mixin offset($offset: 0) {
  @if type-of($offset) == "number" {
    @if unitless($offset) {
      @if $offset != 0 {
        margin-left: calc(#{percentage($offset)} + #{$subdivision-h-gutter / 2});
      }
    } @else {
      margin-left: calc(#{$subdivision-h-gutter / 2} + #{$offset});
    }
  } @else if type-of($offset) == "string" {
    margin-left: $offset;
  }
}

@mixin stack() {
  flex-basis: calc(100% - #{$subdivision-h-gutter});
  max-width: calc(100% - #{$subdivision-h-gutter});
  margin-left: 0; // Remove offset
}


/* Classes */
#{$subdivision-container-selector} {
  display: flex;
  flex-wrap: wrap;
  margin: 0 (-$subdivision-h-gutter / 2);
  box-sizing: border-box;

  > #{$subdivision-column-selector} {
    margin: 0 ($subdivision-h-gutter / 2) $subdivision-v-gutter;
    flex: 1 1 0%;

    > #{$subdivision-container-selector} {
      margin-bottom: -$subdivision-v-gutter;
    }
  }
}
